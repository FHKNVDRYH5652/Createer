<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wingo Hack Creator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            /* Kept a dark, sleek background */
            background: linear-gradient(135deg, #0d0d1e, #0a1128); 
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .page {
            display: none;
            min-height: 80vh;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-top: 20px;
        }
        
        .active-page {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .logo h1 {
            font-size: 2.8rem;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            text-decoration: none;
        }
        
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .form-control:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        
        /* --- Prediction Page (Page 8) specific styles --- */
        #page8 {
            background-image: linear-gradient(135deg, #0d0d1e, #0a1128); 
            min-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0; /* Remove internal padding for full-screen feel */
        }
        
        .page8-content {
            width: 90%;
            max-width: 450px;
            padding: 40px 20px;
            margin-top: 50px;
        }

        .neon-box {
            /* Main container style for the terminal, matching the image */
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 40px rgba(0, 191, 255, 0.5), /* Blue Neon Glow */
                        0 0 15px rgba(0, 191, 255, 0.8) inset;
            border: 2px solid #00bfff;
            width: 100%;
        }

        .terminal-header {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #00bfff;
        }

        .server-status {
            /* Styles for the "Wingo Server Connected" box */
            background: #0d1b2a;
            border: 1px solid #00bfff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .server-status i {
            color: #55efc4; /* Green Wi-Fi icon */
            font-size: 1.5rem;
            text-shadow: 0 0 8px #55efc4;
            animation: wifi-pulse 1.5s infinite alternate;
        }

        @keyframes wifi-pulse {
            from { opacity: 0.7; transform: scale(1); }
            to { opacity: 1; transform: scale(1.1); }
        }

        .server-status-text {
            color: #00bfff; /* Light blue text */
            font-size: 1.1rem;
            font-weight: 600;
        }

        .prediction-prompt {
            text-align: center;
            color: #a5b1c2;
            margin-bottom: 15px;
        }

        .prediction-input input {
            /* Input field styling */
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #00bfff;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1.1rem;
            margin-bottom: 30px;
            text-align: center;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 0 5px rgba(0, 191, 255, 0.2) inset;
        }
        
        .prediction-input input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .generate-btn {
            /* Large, prominent button, matching the image */
            width: 100%;
            padding: 20px 30px;
            font-size: 1.5rem;
            font-weight: 700;
            border-radius: 15px;
            background: linear-gradient(90deg, #ff6b6b, #ff9f43); /* Orange/Red Gradient */
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.9);
            animation: pulse-red 2s infinite;
            border: none;
            color: white;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .generate-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 0 40px rgba(255, 107, 107, 1);
        }

        .delete-hack-link {
            text-align: center;
            margin-top: 20px;
            display: block;
            color: #ff6b6b;
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s;
        }
        
        .delete-hack-link:hover {
            color: #fd79a8;
            text-shadow: 0 0 5px #ff6b6b;
        }
        
        /* ... (Keeping other original CSS styles for consistency) ... */
        .logo { text-align: center; margin-bottom: 30px; }
        .logo p { font-size: 1.2rem; color: #a5b1c2; margin-top: 10px; }
        .btn-center { display: block; margin: 30px auto; width: 250px; }
        .green-rectangle { background: linear-gradient(45deg, #00b894, #55efc4); width: 300px; height: 100px; border-radius: 15px; display: flex; justify-content: center; align-items: center; margin: 50px auto; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); cursor: pointer; transition: all 0.3s ease; }
        .green-rectangle:hover { transform: scale(1.05); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); }
        .green-rectangle h2 { font-size: 1.8rem; color: white; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 10px; font-size: 1.2rem; color: #a5b1c2; }
        .form-control { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #4ecdc4; background: rgba(255, 255, 255, 0.1); color: white; font-size: 1.1rem; transition: all 0.3s ease; }
        .image-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 20px; }
        .image-item { border-radius: 10px; overflow: hidden; cursor: pointer; transition: all 0.3s ease; border: 3px solid transparent; height: 150px; background: rgba(255, 255, 255, 0.1); display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 1rem; color: #fff; }
        .image-item i { font-size: 3rem; margin-bottom: 10px; }
        .image-item:hover { transform: scale(1.05); }
        .image-item.selected { border-color: #ff6b6b; box-shadow: 0 0 15px rgba(255, 107, 107, 0.7); }
        .option-card { background: rgba(255, 255, 255, 0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent; }
        .option-card:hover { transform: translateY(-5px); background: rgba(255, 255, 255, 0.15); }
        .option-card.selected { border-color: #4ecdc4; background: rgba(78, 205, 196, 0.2); }
        .option-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .option-title { font-size: 1.4rem; font-weight: 600; }
        .option-price { font-size: 1.3rem; color: #ff6b6b; font-weight: 700; }
        .option-description { color: #a5b1c2; font-size: 1rem; }
        .payment-container { text-align: center; padding: 20px; }
        .qr-code { width: 250px; height: 250px; background: white; border-radius: 10px; margin: 20px auto; display: flex; justify-content: center; align-items: center; font-size: 1.2rem; color: #333; }
        .payment-amount { font-size: 1.8rem; margin: 20px 0; color: #ff6b6b; font-weight: 700; }
        .utr-input { width: 100%; max-width: 400px; margin: 20px auto; }
        .admin-panel { position: fixed; top: 10px; right: 10px; background: rgba(0, 0, 0, 0.7); padding: 10px; border-radius: 10px; cursor: pointer; z-index: 1000; }
        .admin-panel:hover { background: rgba(0, 0, 0, 0.9); }
        .admin-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 2000; justify-content: center; align-items: center; }
        .admin-content { background: #1a1a2e; width: 90%; max-width: 1000px; height: 80%; border-radius: 15px; padding: 20px; overflow-y: auto; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #4ecdc4; padding-bottom: 10px; }
        .admin-orders { margin-top: 20px; }
        .order-item { background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px; }
        .order-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .order-actions { display: flex; gap: 10px; }
        .btn-approve { background: #00b894; }
        .btn-reject { background: #ff6b6b; }
        .btn-small { padding: 8px 15px; font-size: 0.9rem; border-radius: 20px; box-shadow: none; }
        .btn-small:hover { transform: none; box-shadow: none; }
        .hack-preview { background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 20px; margin-top: 20px; text-align: center; }
        .preview-title { font-size: 1.5rem; margin-bottom: 15px; color: #4ecdc4; }
        .preview-image { width: 200px; height: 200px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; margin: 0 auto 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 1.2rem; color: #a5b1c2; border: 2px solid #4ecdc4; }
        .preview-image i { font-size: 4rem; margin-bottom: 10px; }
        .preview-details { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .preview-item { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; }
        .preview-item-title { font-size: 0.9rem; color: #a5b1c2; margin-bottom: 5px; }
        .preview-item-value { font-size: 1.1rem; font-weight: 600; }
        .status-pending { color: #fdcb6e; }
        .status-approved { color: #00b894; }
        .status-rejected { color: #ff6b6b; }
        .page-indicator { display: flex; justify-content: center; margin-top: 30px; }
        .indicator-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); margin: 0 5px; transition: all 0.3s ease; }
        .indicator-dot.active { background: #4ecdc4; transform: scale(1.2); }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 30px; }
        .btn-back { background: transparent; border: 2px solid #4ecdc4; color: #4ecdc4; }
        .download-btn { background: linear-gradient(45deg, #00b894, #55efc4); color: white; padding: 15px 30px; border-radius: 50px; font-size: 1.2rem; font-weight: 600; cursor: pointer; border: none; margin-top: 20px; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
        .download-btn:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); }
        .green-tick { color: #00b894; margin-right: 10px; font-size: 1.5rem; }
        .prediction-input { display: flex; flex-direction: column; align-items: center; margin: 20px 0; }
        .prediction-input input { width: 200px; padding: 12px; border-radius: 10px; border: 2px solid #4ecdc4; background: rgba(255, 255, 255, 0.1); color: white; font-size: 1.1rem; margin-bottom: 15px; text-align: center; }
        .generate-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
        .prediction-result { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); padding: 30px; border-radius: 15px; text-align: center; z-index: 3000; display: none; animation: popIn 0.3s ease-out; box-shadow: 0 0 30px rgba(255, 255, 255, 0.2); }
        @keyframes popIn { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
        .prediction-big, .prediction-small, .prediction-red, .prediction-green, .prediction-number { font-size: 3rem; font-weight: 700; margin: 15px 0; }
        .prediction-big { color: #ff9f43; }
        .prediction-small { color: #00b894; }
        .prediction-red { color: #ff6b6b; }
        .prediction-green { color: #00b894; }
        .prediction-number { color: #6c5ce7; }
        .close-prediction { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #a5b1c2; }
        .password-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 2000; justify-content: center; align-items: center; }
        .password-content { background: #1a1a2e; width: 90%; max-width: 400px; border-radius: 15px; padding: 30px; text-align: center; }
        .password-input { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #4ecdc4; background: rgba(255, 255, 255, 0.1); color: white; font-size: 1.1rem; margin: 20px 0; text-align: center; }
        .password-submit { background: linear-gradient(45deg, #ff6b6b, #4ecdc4); color: white; padding: 12px 25px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; border: none; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
        .password-submit:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
        .spinner { border: 8px solid #f3f3f3; border-top: 8px solid #ff6b6b; border-radius: 50%; width: 60px; height: 60px; animation: spin 2s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #checkApprovalStatus { display: none; }

        /* Analysis Modal styles */
        .analysis-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 5000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #00ff00; /* Classic Hacker Green */
            font-family: 'Consolas', 'Courier New', monospace;
            padding: 20px;
        }

        .analysis-modal h2 {
            color: #4ecdc4;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #4ecdc4;
        }

        .analysis-content {
            width: 80%;
            height: 70%;
            overflow-y: scroll;
            border: 2px solid #00b894;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 184, 148, 0.5);
            white-space: pre-wrap;
            line-height: 1.2;
            font-size: 0.9rem;
        }

        .analysis-progress {
            width: 80%;
            margin-top: 20px;
            background: #222;
            height: 15px;
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #00ff00;
        }

        .analysis-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00b894, #4ecdc4);
            transition: width 0.1s linear;
        }

        .analysis-text {
            margin-top: 10px;
            font-size: 1rem;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        .hacker-text {
            color: #00ff00;
            animation: blink 1s step-end infinite;
        }

    </style>
</head>
<body>
    <div class="analysis-modal" id="analysisModal">
        <h2>Initiating Wingo Pattern Detection & Trend Analysis...</h2>
        <div class="analysis-content" id="analysisContent">
            </div>
        <div class="analysis-progress">
            <div class="analysis-bar" id="analysisBar"></div>
        </div>
        <div class="analysis-text" id="analysisText">Awaiting Server Response...</div>
    </div>
    <div class="admin-panel" id="adminPanel">
        <i class="fas fa-cog"></i>
    </div>
    
    <div class="password-modal" id="passwordModal">
        <div class="password-content">
            <h2>Admin Access</h2>
            <p>Enter password to access admin panel</p>
            <input type="password" class="password-input" id="adminPassword" placeholder="Enter password">
            <button class="password-submit" id="submitPassword">Submit</button>
        </div>
    </div>
    
    <div class="admin-modal" id="adminModal">
        <div class="admin-content">
            <div class="admin-header">
                <h2>Admin Panel - Pending Orders</h2>
                <button class="btn btn-small" id="closeAdmin">Close</button>
            </div>
            <div class="admin-orders" id="adminOrders">
                </div>
        </div>
    </div>
    
    <div class="prediction-result" id="predictionResult">
        <span class="close-prediction" id="closePrediction">&times;</span>
        <h3>Prediction Result</h3>
        <div id="predictionText"></div>
        <p>This prediction will disappear in 3 seconds</p>
    </div>
    <div class="container">
        <div class="logo">
            <h1 id="mainTitle">Wingo Hack Creator</h1>
            <p id="subTitle">Create your custom Wingo game hack in minutes</p>
        </div>
        
        <div class="page active-page" id="page1">
            <h2>Welcome to Wingo Hack Creator</h2>
            <p>Create your own customized hack for Wingo game with advanced prediction features.</p>
            
            <div class="green-rectangle" id="createHackBtn">
                <h2>Create Your Hack</h2>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>
        
        <div class="page" id="page2">
            <h2>Enter Your Hack Name</h2>
            <p>Choose a unique name for your hack</p>
            
            <div class="form-group">
                <input type="text" class="form-control" id="hackName" placeholder="e.g. Perfect Hack">
            </div>
            
            <button class="btn btn-center" id="nextToPage3">Next</button>
            
            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage1">Back</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>
        
        <div class="page" id="page3">
            <h2>Choose Your Hack Background Image</h2>
            <p>Select from our collection of 20 anime backgrounds</p>
            
            <div class="image-grid" id="backgroundGrid">
                </div>
            
            <button class="btn btn-center" id="nextToPage4">Next</button>
            
            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage2">Back</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>
        
        <div class="page" id="page4">
            <h2>Choose Your Hack Mode</h2>
            <p>Select the prediction mode for your hack</p>
            
            <div class="option-card" data-mode="bigsmall" data-price="249">
                <div class="option-header">
                    <div class="option-title">Big / Small Mode</div>
                    <div class="option-price">₹249</div>
                </div>
                <div class="option-description">
                    Get predictions for Big or Small outcomes with orange and green colors.
                </div>
            </div>
            
            <div class="option-card" data-mode="color" data-price="249">
                <div class="option-header">
                    <div class="option-title">Color Mode</div>
                    <div class="option-price">₹249</div>
                </div>
                <div class="option-description">
                    Get predictions for Red or Green colors.
                </div>
            </div>
            
            <div class="option-card" data-mode="number" data-price="599">
                <div class="option-header">
                    <div class="option-title">Number Mode</div>
                    <div class="option-price">₹599</div>
                </div>
                <div class="option-description">
                    Get predictions for numbers 0-9 with color coding.
                </div>
            </div>
            
            <button class="btn btn-center" id="nextToPage5">Next</button>
            
            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage3">Back</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>
        
        <div class="page" id="page5">
            <h2>How much under-level win should I get?</h2>
            <p>Select your desired under-level win option</p>
            
            <div class="option-card" data-underlevel="1" data-price="1599">
                <div class="option-header">
                    <div class="option-title">Under 1 Level</div>
                    <div class="option-price">₹1599</div>
                </div>
                <div class="option-description">
                    Highest win probability with minimal risk.
                </div>
            </div>
            
            <div class="option-card" data-underlevel="2" data-price="699">
                <div class="option-header">
                    <div class="option-title">Under 2 Level</div>
                    <div class="option-price">₹699</div>
                </div>
                <div class="option-description">
                    Good win probability with moderate risk.
                </div>
            </div>
            
            <div class="option-card" data-underlevel="3" data-price="499">
                <div class="option-header">
                    <div class="option-title">Under 3 Level</div>
                    <div class="option-price">₹499</div>
                </div>
                <div class="option-description">
                    Standard win probability with balanced risk.
                </div>
            </div>
            
            <div class="option-card" data-underlevel="4" data-price="399">
                <div class="option-header">
                    <div class="option-title">Under 4 Level</div>
                    <div class="option-price">₹399</div>
                </div>
                <div class="option-description">
                    Basic win probability with higher risk.
                </div>
            </div>
            
            <button class="btn btn-center" id="nextToPage6">Next</button>
            
            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage4">Back</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>
        
        <div class="page" id="page6">
            <h2>Complete Your Payment</h2>
            <p>Scan the QR code and submit your UTR after payment</p>
            
            <div class="payment-container">
                <h3>Scan and Pay</h3>
                <div class="qr-code">
                    <img src="qr.png" alt="Payment QR Code" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;">
                </div>
                
                <div class="payment-amount" id="totalAmount">Total: ₹0</div>
                
                <div class="form-group utr-input">
                    <input type="text" class="form-control" id="utrNumber" placeholder="Enter UTR Number">
                </div>
                
                <button class="btn" id="submitPayment">Submit UTR</button>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage5">Back</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>

        <div class="page" id="page7">
            <h2>Order Submitted - Waiting for Approval</h2>
            <p>Your payment details (UTR: <span id="displayUtr"></span>) have been submitted. Please wait for an administrator to approve your hack request. **The page will update automatically.**</p>
            
            <div class="spinner"></div>

            <div class="hack-preview">
                <h3 class="preview-title">Order Status</h3>
                <div class="preview-details">
                    <div class="preview-item">
                        <div class="preview-item-title">Order ID</div>
                        <div class="preview-item-value" id="previewOrderId">...</div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-item-title">Status</div>
                        <div class="preview-item-value status-pending" id="approvalStatus">PENDING</div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-item-title">Total Amount</div>
                        <div class="preview-item-value" id="previewTotalAmount">₹0</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-center" id="checkApprovalStatus">Check Approval Status</button>

            <div class="nav-buttons">
                <button class="btn btn-back" id="backToPage6">Back to Payment</button>
            </div>
            
            <div class="page-indicator">
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot active"></div>
            </div>
        </div>
        
        <div class="page" id="page8">
            <div class="page8-content">
                <div class="neon-box">
                    <div class="terminal-header">Wingo Predictor Terminal</div>
                    
                    <div class="server-status">
                        <i class="fas fa-wifi"></i> 
                        <span class="server-status-text" id="serverStatusText">Wingo Server Connected</span>
                    </div>
                    
                    <p class="prediction-prompt">
                        Enter the current Wingo Period ID to generate prediction.
                    </p>
                    
                    <div class="prediction-input">
                        <input type="text" id="periodNumber" placeholder="Enter Wingo Period ID">
                        
                        <button class="generate-btn" id="generatePrediction">
                            <i class="fas fa-search-dollar"></i> GENERATE PREDICTION
                        </button>
                    </div>
                </div>
                
                <a href="#" class="delete-hack-link" id="deleteHackBtn">
                    <i class="fas fa-trash-alt"></i> Delete Hack
                </a>

                <div class="hack-preview" style="display: none;"> 
                    <h3 class="preview-title">Hack Configuration</h3>
                    <div class="preview-image" id="previewImage">
                        <i class="fas fa-magic"></i>
                        <span>Background Active</span>
                    </div>
                    
                    <div class="preview-details">
                        <div class="preview-item">
                            <div class="preview-item-title">Hack Name</div>
                            <div class="preview-item-value" id="downloadHackName">-</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-title">Mode</div>
                            <div class="preview-item-value" id="downloadMode">-</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-title">Under Level</div>
                            <div class="preview-item-value" id="downloadUnderLevel">-</div>
                        </div>
                        <div class="preview-item">
                            <div class="preview-item-title">Status</div>
                            <div class="preview-item-value status-approved">Activated</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBs7eQyMrcN8kJWMHl2ac2UZHlYQ6DypD8",
            authDomain: "terminal-xxrr.firebaseapp.com",
            databaseURL: "https://terminal-xxrr-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "terminal-xxrr",
            storageBucket: "terminal-xxrr.firebasestorage.app",
            messagingSenderId: "722753278120",
            appId: "1:722753278120:web:bfa37aab39635a4e57f29d",
            measurementId: "G-E3MZH3E1K5"
        };

        let db;
        let unsubscribeListener = null; 
        const LOCAL_STORAGE_KEY = 'wingoApprovedHack';

        // Initialize Firebase with error handling
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            console.log("Firebase Initialized Successfully.");
        } catch (error) {
            console.error("Firebase Initialization Failed: ", error);
        }

        // User data object to store all selections
        let userData = {
            hackName: '',
            backgroundImage: '',
            mode: '',
            modePrice: 0,
            underLevel: '',
            underLevelPrice: 0,
            totalAmount: 0,
            utr: '',
            status: 'pending',
            orderId: null, 
            createdAt: null 
        };
        
        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const approvalStatusElement = document.getElementById('approvalStatus');
        const generatePredictionBtn = document.getElementById('generatePrediction');
        const periodNumberInput = document.getElementById('periodNumber');
        const analysisModal = document.getElementById('analysisModal');
        const analysisContent = document.getElementById('analysisContent');
        const analysisBar = document.getElementById('analysisBar');
        const analysisText = document.getElementById('analysisText');
        const deleteHackBtn = document.getElementById('deleteHackBtn');
        const backgroundGrid = document.getElementById('backgroundGrid');
        const predictionResult = document.getElementById('predictionResult');
        const predictionText = document.getElementById('predictionText');
        const closePrediction = document.getElementById('closePrediction');
        const adminPanel = document.getElementById('adminPanel');
        const passwordModal = document.getElementById('passwordModal');
        const adminPassword = document.getElementById('adminPassword');
        const submitPassword = document.getElementById('submitPassword');
        const adminModal = document.getElementById('adminModal');
        const closeAdmin = document.getElementById('closeAdmin');

        
        // --- Core Functions ---
        
        function showPage(pageNumber, restore = false) {
            // Stop listener before changing page
            stopApprovalListener(); 
            
            // Update Title/Subtitle for Page 8
            const mainTitle = document.getElementById('mainTitle');
            const subTitle = document.getElementById('subTitle');
            if (pageNumber === 8) {
                mainTitle.textContent = 'Wingo Predictor';
                subTitle.textContent = 'Active Terminal';
                document.querySelector('.logo').style.marginBottom = '10px';
            } else {
                mainTitle.textContent = 'Wingo Hack Creator';
                subTitle.textContent = 'Create your custom Wingo game hack in minutes';
                document.querySelector('.logo').style.marginBottom = '30px';
            }


            pages.forEach(page => {
                page.classList.remove('active-page');
            });
            document.getElementById(`page${pageNumber}`).classList.add('active-page');
            
            // Start listener only on page 7
            if (pageNumber === 7 && userData.orderId) {
                startApprovalListener();
            } else if (pageNumber === 8) {
                // On page 8, update UI and set background
                updateDownloadPreview();
                if (restore) {
                    setPage8Background(userData.backgroundImage);
                } else {
                    // Update the Firestore entry to 'activated' status on first time view
                    updateOrderStatus(userData.orderId, 'activated'); 
                    // Save to local storage only upon approval/first display
                    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(userData));
                    setPage8Background(userData.backgroundImage);
                }
            }
            
            // Update page indicators
            document.querySelectorAll('.indicator-dot').forEach((dot, index) => {
                dot.classList.remove('active');
                if (pageNumber <= 7 && index === pageNumber - 1) { 
                    dot.classList.add('active');
                }
            });
        }
        
        function setPage8Background(imageRef) {
            const page8 = document.getElementById('page8');
            // Simplified background setting using a consistent but unique gradient
            const hash = parseInt(imageRef.split('.')[0].replace('anime', '')) || 0; // e.g., '1', '20'
            const colors = [
                ['#1a1a2e', '#16213e'], // 0
                ['#0d0d1e', '#0a1128'], // 1
                ['#0f0f3a', '#222266'], // 2
                ['#1a1a2e', '#4ecdc4'], // 3
                ['#3a0f0f', '#662222'], // 4
                ['#0f3a0f', '#226622']  // 5
            ];
            const [color1, color2] = colors[hash % colors.length];
            
            page8.style.backgroundImage = `linear-gradient(135deg, ${color1}, ${color2})`;
        }

        function startApprovalListener() {
            if (!db || !userData.orderId || unsubscribeListener) return;

            unsubscribeListener = db.collection('hackOrders').doc(userData.orderId)
                .onSnapshot((doc) => {
                    if (doc.exists) {
                        const newOrderData = doc.data();
                        const status = newOrderData.status;
                        
                        approvalStatusElement.textContent = status.toUpperCase();
                        approvalStatusElement.className = `preview-item-value status-${status}`;

                        if (status === 'approved') {
                            unsubscribeListener(); 
                            alert('Your hack has been approved! Redirecting to the Prediction Terminal.');
                            // Merge new data (e.g., server timestamp) and show page 8
                            userData = {...userData, ...newOrderData};
                            showPage(8); 
                        } else if (status === 'rejected') {
                            unsubscribeListener();
                            alert('Your hack request was rejected. Please contact support.');
                        }
                    }
                }, (error) => {
                    console.error("Error setting up snapshot listener: ", error);
                    approvalStatusElement.textContent = 'ERROR';
                    approvalStatusElement.className = 'preview-item-value status-rejected';
                });
        }
        
        function stopApprovalListener() {
            if (unsubscribeListener) {
                unsubscribeListener();
                unsubscribeListener = null;
            }
        }
        
        // Function for the fake analysis screen
        function startFakeAnalysis() {
            const periodNum = periodNumberInput.value;
            if (!periodNum) {
                alert('Please enter a period number for analysis.');
                return;
            }
            
            // 1. Show Modal
            analysisModal.style.display = 'flex';
            analysisContent.innerHTML = '';
            analysisBar.style.width = '0%';
            analysisText.textContent = `Establishing connection to WINGO-SERVER [${periodNum}]...`;

            // 2. Fake Analysis Steps
            const duration = 7500; // 7.5 seconds
            const steps = [
                { time: 500, text: `[1] Connection secured. Initiating high-level packet decryption...` },
                { time: 1000, text: `[2] Reading Wingo Historical Data for last 1000 periods...` },
                { time: 1500, text: `[3] **PATTERN DETECTED**: 'Dragon Tail' sequence found. Confidence: 75%` },
                { time: 2000, text: `[4] Cross-referencing 'Under ${userData.underLevel} Level' algorithm...` },
                { time: 2500, text: `[5] **TREND ANALYSIS**: Macro-trend shows potential for ${Math.random() > 0.5 ? 'Upturn' : 'Downturn'} bias.` },
                { time: 3000, text: `[6] Running Monte Carlo Simulation for ${userData.mode.toUpperCase()} mode...` },
                { time: 3500, text: `[7] Simulation complete. Analyzing statistical anomalies...` },
                { time: 4000, text: `[8] **WARNING**: Minor server latency detected. Re-calibrating for period ${periodNum}...` },
                { time: 4500, text: `[9] **RESULT CONFLICT**: Detected a 5% chance of a reverse pattern ('Tiger Strike').` },
                { time: 5000, text: `[10] Applying custom '${userData.hackName}' configuration filters...` },
                { time: 5500, text: `[11] Finalizing prediction based on Under-Level constraint...` },
                { time: 6000, text: `[12] **SYSTEM LOCK**: Prediction for period ${periodNum} is ready.` },
                { time: 7000, text: `[13] Transmitting results to Prediction Terminal... <span class="hacker-text">█</span>` },
            ];

            let startTime = Date.now();
            let stepIndex = 0;

            function animateAnalysis() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(100, (elapsed / duration) * 100);
                analysisBar.style.width = `${progress}%`;

                // Update text
                if (progress < 100) {
                    analysisText.textContent = `Analysis in Progress... ${progress.toFixed(0)}%`;
                }

                // Add log steps
                while (stepIndex < steps.length && elapsed >= steps[stepIndex].time) {
                    analysisContent.innerHTML += `<span style="color: #4ecdc4;">[${(new Date()).toLocaleTimeString()}]</span> ${steps[stepIndex].text}<br>`;
                    analysisContent.scrollTop = analysisContent.scrollHeight; // Auto-scroll
                    stepIndex++;
                }

                if (elapsed < duration) {
                    requestAnimationFrame(animateAnalysis);
                } else {
                    analysisText.textContent = `Prediction Delivered for Period ${periodNum}.`;
                    setTimeout(() => {
                        analysisModal.style.display = 'none';
                        showPredictionResult(); // Show the final prediction
                    }, 500); // 0.5 sec delay after completion
                }
            }

            animateAnalysis();
        }
        
        // Function to show the actual prediction result (from original code)
        function showPredictionResult() {
            let prediction;
            let predictionClass;
            let modeName;
            
            // Logic remains the same (random prediction based on mode)
            if (userData.mode === 'bigsmall') {
                prediction = Math.random() > 0.5 ? 'BIG' : 'SMALL';
                predictionClass = prediction === 'BIG' ? 'prediction-big' : 'prediction-small';
                modeName = 'Big/Small';
            } else if (userData.mode === 'color') {
                prediction = Math.random() > 0.5 ? 'RED' : 'GREEN';
                predictionClass = prediction === 'RED' ? 'prediction-red' : 'prediction-green';
                modeName = 'Color';
            } else if (userData.mode === 'number') {
                prediction = Math.floor(Math.random() * 10);
                predictionClass = 'prediction-number';
                modeName = 'Number';
            } else {
                 predictionText.innerHTML = `<div>Select a valid Mode.</div>`;
                 predictionResult.style.display = 'block';
                 setTimeout(() => { predictionResult.style.display = 'none'; }, 3000);
                 return;
            }

            predictionText.innerHTML = `
                <p style="font-size: 1.5rem; margin-bottom: 5px;">Mode: ${modeName}</p>
                <div class="${predictionClass}">${prediction}</div>
            `;
            
            predictionResult.style.display = 'block';
            
            setTimeout(() => {
                predictionResult.style.display = 'none';
            }, 3000);
        }

        // Function to load the hack from local storage on load
        function checkLocalStorage() {
            const savedData = localStorage.getItem(LOCAL_STORAGE_KEY);
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    if (parsedData.status === 'approved' || parsedData.status === 'activated') {
                        userData = parsedData;
                        // Alert is removed for a cleaner initial load
                        // alert(`Welcome back, ${userData.hackName} is active!`); 
                        showPage(8, true); // Go directly to page 8, restoring state
                        return true;
                    }
                } catch (e) {
                    console.error("Error parsing local storage data:", e);
                    localStorage.removeItem(LOCAL_STORAGE_KEY); // Clear bad data
                }
            }
            return false;
        }


        // --- Event Handlers (Updated/Added) ---
        
        document.getElementById('createHackBtn').addEventListener('click', () => showPage(2));
        document.getElementById('nextToPage3').addEventListener('click', () => {
            userData.hackName = document.getElementById('hackName').value;
            if (userData.hackName) {
                showPage(3);
            } else {
                alert('Please enter a hack name');
            }
        });
        document.getElementById('nextToPage4').addEventListener('click', () => {
            if (userData.backgroundImage) {
                showPage(4);
            } else {
                alert('Please select a background image');
            }
        });
        document.getElementById('nextToPage5').addEventListener('click', () => {
            if (userData.mode) {
                showPage(5);
            } else {
                alert('Please select a hack mode');
            }
        });
        document.getElementById('nextToPage6').addEventListener('click', () => {
            if (userData.underLevel) {
                calculateTotal();
                showPage(6);
            } else {
                alert('Please select an under-level option');
            }
        });
        
        document.getElementById('submitPayment').addEventListener('click', async () => {
            userData.utr = document.getElementById('utrNumber').value;
            if (userData.utr) {
                if (!db) {
                    alert('Database connection failed. Cannot submit order.');
                    return;
                }
                
                // If it's a new order (no orderId), save it. If re-submitting an old one, update.
                if (!userData.orderId || userData.status === 'rejected') { 
                    await saveUserData();
                } else {
                    // Update the existing order with the new UTR if needed and reset to pending
                    // In a real system, you might want to prevent resubmitting if already pending/approved
                    userData.status = 'pending';
                    await db.collection('hackOrders').doc(userData.orderId).update({
                        utr: userData.utr,
                        status: 'pending'
                    });
                }
                
                document.getElementById('displayUtr').textContent = userData.utr;
                document.getElementById('previewOrderId').textContent = userData.orderId ? userData.orderId.substring(0, 8) + '...' : 'N/A';
                document.getElementById('previewTotalAmount').textContent = `₹${userData.totalAmount}`;
                
                approvalStatusElement.textContent = 'PENDING';
                approvalStatusElement.className = 'preview-item-value status-pending';
                
                showPage(7);
            } else {
                alert('Please enter your UTR number');
            }
        });

        // Back buttons
        document.getElementById('backToPage1').addEventListener('click', () => showPage(1));
        document.getElementById('backToPage2').addEventListener('click', () => showPage(2));
        document.getElementById('backToPage3').addEventListener('click', () => showPage(3));
        document.getElementById('backToPage4').addEventListener('click', () => showPage(4));
        document.getElementById('backToPage5').addEventListener('click', () => showPage(5));
        document.getElementById('backToPage6').addEventListener('click', () => showPage(6)); 
        
        // Generate prediction button now calls the fake analysis
        generatePredictionBtn.addEventListener('click', startFakeAnalysis);

        // Delete Hack Button Handler
        deleteHackBtn.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent default link behavior
            if (confirm('Are you sure you want to delete this hack configuration? You will have to create a new one.')) {
                // Clear local storage
                localStorage.removeItem(LOCAL_STORAGE_KEY);
                // Reset userData object
                userData = { hackName: '', backgroundImage: '', mode: '', modePrice: 0, underLevel: '', underLevelPrice: 0, totalAmount: 0, utr: '', status: 'pending', orderId: null, createdAt: null };
                // Go back to the starting page
                showPage(1);
                alert('Hack configuration deleted. You can now create a new one.');
            }
        });

        // --- Utility Functions (Updated) ---
        function init() {
             // Check if hack exists in local storage before initializing components
            if (checkLocalStorage()) {
                // If loaded from storage, do not proceed with initial creation logic
                return;
            }

            // Create background image options 
            for (let i = 1; i <= 20; i++) {
                const imageName = `anime${i}.png`;
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                // Using font-awesome icons as placeholders for BG images
                imageItem.innerHTML = `<i class="fas fa-image"></i><span>BG ${i}</span>`; 
                imageItem.setAttribute('data-image', imageName);
                
                imageItem.addEventListener('click', function() {
                    document.querySelectorAll('.image-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    userData.backgroundImage = this.getAttribute('data-image');
                });
                
                backgroundGrid.appendChild(imageItem);
            }

            // Set up mode selection and under level selection
            document.querySelectorAll('.option-card[data-mode]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.option-card[data-mode]').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    userData.mode = this.getAttribute('data-mode');
                    userData.modePrice = parseInt(this.getAttribute('data-price'));
                });
            });

            document.querySelectorAll('.option-card[data-underlevel]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.option-card[data-underlevel]').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    userData.underLevel = this.getAttribute('data-underlevel');
                    userData.underLevelPrice = parseInt(this.getAttribute('data-price'));
                });
            });
        }

        function calculateTotal() {
            userData.totalAmount = userData.modePrice + userData.underLevelPrice;
            document.getElementById('totalAmount').textContent = `Total: ₹${userData.totalAmount}`;
        }

        // Function to update the download page's preview (now the Hack Terminal)
        function updateDownloadPreview() {
            document.getElementById('downloadHackName').textContent = userData.hackName;
            
            const modeName = userData.mode === 'bigsmall' ? 'Big/Small' : 
                             userData.mode === 'color' ? 'Color' : 'Number';
            document.getElementById('downloadMode').textContent = modeName;
            
            document.getElementById('downloadUnderLevel').textContent = `Under ${userData.underLevel} Level`;

            // Update Preview Image 
            const previewImageDiv = document.getElementById('previewImage');
            const bgName = userData.backgroundImage.replace('.png', '');
            previewImageDiv.innerHTML = `
                <i class="fas fa-magic"></i>
                <span>Background: ${bgName}</span>
            `;
        }

        async function saveUserData() {
            if (!db) return;
            try {
                userData.status = 'pending';
                const docRef = await db.collection('hackOrders').add({
                    hackName: userData.hackName,
                    backgroundImage: userData.backgroundImage,
                    mode: userData.mode,
                    underLevel: userData.underLevel,
                    totalAmount: userData.totalAmount,
                    utr: userData.utr,
                    status: userData.status,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                console.log("Document written with ID: ", docRef.id);
                userData.orderId = docRef.id; 
            } catch (error) {
                console.error("Error adding document: ", error);
                alert("Error submitting order: " + error.message);
            }
        }

        async function updateOrderStatus(orderId, status) {
            if (!db || !orderId) return;
            try {
                await db.collection('hackOrders').doc(orderId).update({
                    status: status
                });
                // No need to alert/reload in this specific background update case
            } catch(error) {
                console.error(`Error updating status for ${orderId}:`, error);
            }
        }

        // Admin functions (loadOrders, updateOrderStatus) remain the same
        function loadOrders() {
            if (!db) {
                document.getElementById('adminOrders').innerHTML = `<h3>Pending Orders</h3><p style="color: #ff6b6b; font-weight: bold;">Database connection is not active.</p>`;
                return;
            }
            
            const adminOrders = document.getElementById('adminOrders');
            adminOrders.innerHTML = '<h3>Pending Orders</h3><div id="loadingSpinner" class="spinner"></div>';
            
            db.collection('hackOrders').where('status', 'in', ['pending', 'approved']).get()
                .then((querySnapshot) => {
                    document.getElementById('loadingSpinner')?.remove(); 
                    
                    if (querySnapshot.empty) {
                        adminOrders.innerHTML = '<h3>Pending Orders</h3><p>No pending or recently approved orders</p>';
                        return;
                    }
                    
                    adminOrders.innerHTML = '<h3>Pending Orders</h3>'; 
                    
                    querySnapshot.forEach((doc) => {
                        const order = doc.data();
                        const statusClass = order.status === 'approved' ? 'status-approved' : 'status-pending';
                        const statusText = order.status === 'approved' ? 'APPROVED' : 'PENDING';

                        const orderItem = document.createElement('div');
                        orderItem.className = 'order-item';
                        orderItem.innerHTML = `
                            <div class="order-header">
                                <h4>${order.hackName} (ID: ${doc.id.substring(0, 6)}...) - <span class="${statusClass}">${statusText}</span></h4>
                                <div class="order-actions">
                                    <button class="btn btn-small btn-approve" data-id="${doc.id}">Approve</button>
                                    <button class="btn btn-small btn-reject" data-id="${doc.id}">Reject</button>
                                </div>
                            </div>
                            <p><strong>Mode:</strong> ${order.mode} | <strong>Under Level:</strong> ${order.underLevel} | <strong>BG:</strong> ${order.backgroundImage}</p>
                            <p><strong>Amount:</strong> ₹${order.totalAmount} | <strong>UTR:</strong> ${order.utr}</p>
                            <p><strong>Created:</strong> ${order.createdAt ? order.createdAt.toDate().toLocaleString() : 'N/A'}</p>
                        `;
                        adminOrders.appendChild(orderItem);
                    });
                    
                    document.querySelectorAll('.btn-approve').forEach(btn => {
                        btn.addEventListener('click', function() {
                            updateOrderStatusAdmin(this.getAttribute('data-id'), 'approved');
                        });
                    });
                    
                    document.querySelectorAll('.btn-reject').forEach(btn => {
                        btn.addEventListener('click', function() {
                            updateOrderStatusAdmin(this.getAttribute('data-id'), 'rejected');
                        });
                    });
                })
                .catch((error) => {
                    console.error("Error getting documents: ", error);
                    let errorMessage = error.code === 'permission-denied' ? 'Error: Permission Denied. Check your Firebase Security Rules!' : `Error: ${error.message}`;
                    document.getElementById('loadingSpinner')?.remove();
                    adminOrders.innerHTML = `<h3>Pending Orders</h3><p style="color: #ff6b6b; font-weight: bold;">${errorMessage}</p>`;
                });
        }

        function updateOrderStatusAdmin(orderId, status) {
            if (!db) return alert('Database connection is not active.');
            
            db.collection('hackOrders').doc(orderId).update({
                status: status
            })
            .then(() => {
                alert(`Order ${orderId.substring(0, 6)}... ${status} successfully`);
                loadOrders(); // Reload orders
            })
            .catch((error) => {
                console.error("Error updating document: ", error);
                alert(`Error updating order: ${error.message}`);
            });
        }

        // Admin Panel/Password logic (from original code)
        adminPanel.addEventListener('click', () => { passwordModal.style.display = 'flex'; });
        submitPassword.addEventListener('click', () => {
            if (adminPassword.value === '456') {
                passwordModal.style.display = 'none';
                adminModal.style.display = 'flex';
                loadOrders();
            } else { alert('Incorrect password'); }
        });
        closeAdmin.addEventListener('click', () => { adminModal.style.display = 'none'; });
        closePrediction.addEventListener('click', () => { predictionResult.style.display = 'none'; });
        
        // Initialize the application
        init();
    </script>
</body>
</html>
